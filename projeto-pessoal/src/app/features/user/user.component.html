<form [formGroup]="form">

    <div class="save-btn-content">
        <button matButton="elevated" class="save-btn">
            Editar
            <mat-icon class="material-icons-outlined">add</mat-icon>
        </button>
    </div>

    <div class="form-grid">
        <mat-form-field class="col-6" appearance="outline">
            <mat-label>Nome</mat-label>
            <input
            matInput
            formControlName="name"
            required
        />
        
        @if (form.controls.name.hasError('required') && form.controls.name.touched) {
            <mat-error>Campo obrigatório</mat-error>
        }
        @if (form.controls.name.hasError('minlength')) {
            <mat-error>Mínimo de 3 caracteres</mat-error>
        }
        @if (form.controls.name.hasError('maxlength')) {
            <mat-error>Máximo de 150 caracteres</mat-error>
        }
        </mat-form-field>
        <mat-form-field class="col-6" appearance="outline">
            <mat-label>Nome da Mãe</mat-label>
            <input
            matInput
            formControlName="mathersName"
            required
        />
        
        @if (form.controls.mathersName.hasError('required') && form.controls.mathersName.touched) {
            <mat-error>Campo obrigatório</mat-error>
        }
        @if (form.controls.mathersName.hasError('minlength')) {
            <mat-error>Mínimo de 3 caracteres</mat-error>
        }
        @if (form.controls.mathersName.hasError('maxlength')) {
            <mat-error>Máximo de 150 caracteres</mat-error>
        }
        </mat-form-field>
        <mat-form-field class="col-3" appearance="outline">
            <mat-label>Gênero</mat-label>
            <input
            matInput
            formControlName="gener"
            required
        />
        
        @if (form.controls.gener.hasError('required') && form.controls.gener.touched) {
            <mat-error>Campo obrigatório</mat-error>
        }
        </mat-form-field>
        <mat-form-field class="col-3" appearance="outline">
            <mat-label>Telefone</mat-label>
            <input
            matInput
            formControlName="phoneNumber"
            required
        />
        
        @if (form.controls.phoneNumber.hasError('required') && form.controls.phoneNumber.touched) {
            <mat-error>Campo obrigatório</mat-error>
        }
        </mat-form-field>

        <mat-form-field class="col-3" appearance="outline">
            <mat-label>CPF</mat-label>
            <input
            matInput
            formControlName="cpf"
            required
        />
        
        @if (form.controls.cpf.hasError('required') && form.controls.cpf.touched) {
            <mat-error>Campo obrigatório</mat-error>
        }
        </mat-form-field>

        <mat-form-field class="col-3" appearance="outline">
            <mat-label>RG</mat-label>
            <input
            matInput
            formControlName="rg"
            required
        />
        
        @if (form.controls.rg.hasError('required') && form.controls.rg.touched) {
            <mat-error>Campo obrigatório</mat-error>
        }
        </mat-form-field>
    </div>

    
            <div formArrayName="enderecos" class="endereco-content">
                @for (aula of enderecosGet().controls ; track aula; let i = $index) {

                     <mat-accordion>
                        <mat-expansion-panel (opened)="panelOpenState.set(true)" (closed)="panelOpenState.set(false)">
                            <mat-expansion-panel-header>
                                <mat-panel-title> Endereco {{i + 1}} </mat-panel-title>

                                <mat-panel-description>
                                    Currently I am {{panelOpenState() ? 'open' : 'closed'}}
                                </mat-panel-description>
                            </mat-expansion-panel-header>
                            
                            <p>I'm visible because I am open</p>
                                <div [formGroupName]="i" class="form-grid">
                                    <mat-form-field class="col-3" appearance="outline">
                                        <mat-label>cep</mat-label>
                                        <input
                                        matInput
                                        formControlName="cep"
                                        required/>
                                    </mat-form-field>

                                    <mat-form-field class="col-4" appearance="outline">
                                        <mat-label>Logradouro</mat-label>
                                        <input
                                        matInput
                                        formControlName="logradouro"
                                        required/>
                                    </mat-form-field>

                                    <mat-form-field class="col-4" appearance="outline">
                                        <mat-label>Bairro</mat-label>
                                        <input
                                        matInput
                                        formControlName="bairro"
                                        required/>
                                    </mat-form-field>

                                    <mat-form-field class="col-3" appearance="outline">
                                        <mat-label>Número</mat-label>
                                        <input
                                        matInput
                                        formControlName="numero"
                                        required/>
                                    </mat-form-field>
                                    <mat-form-field class="col-6" appearance="outline">
                                        <mat-label>Complemento</mat-label>
                                        <input
                                        matInput
                                        formControlName="complemento"
                                        required/>
                                    </mat-form-field>
                                </div>
                        </mat-expansion-panel>
                    </mat-accordion>
                }
            </div>
</form>